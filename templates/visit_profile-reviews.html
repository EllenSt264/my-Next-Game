{% extends "visit_profile-template.html" %}
{% block profile_content %}

    <!--Review card -->
    {% for review in user_reviews %}
        <div class="profile-card-inner">
            <div class="user-review-card py-5">
                <div class="row card-panel profile-card-content">
                    <div class="valigin-wrapper">
                        <!-- Review card header -->
                        <div class="row review-card-row">
                            <!-- Image -->
                            <div class="col s12 m7 l7">
                                <div class="card-image">
                                    <img src="{{ review.game_img_full }}" alt="Game image for the user's review">
                                </div>
                            </div>
                            <!-- Review verdict -->
                            <div class="col s12 m5 l5">
                                <div class="card-panel review-verdict">
                                    {% if review.recommended == "yes" %}
                                    <div class="card-panel light-blue accent-3">
                                        <h3 class="center-align">
                                            Postive
                                            <i class="material-icons">thumb_up</i>
                                        </h3>
                                    </div>
                                    {% elif review.recommended == "no" %}
                                    <div class="card-panel red accent-4 darken-3">
                                        <h3 class="center-align">
                                            Negative
                                            <i class="material-icons">thumb_down</i>
                                        </h3>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <!-- Submission date -->
                            <div class="row review-card-row">
                                <div class="col m12 l5">
                                    <div class="card-panel submission-date">
                                        <div class="card-title">
                                            <h6>Posted:
                                                <span>{{ review.date_submitted }}</span> |
                                                Last Edited:
                                                <span></span>
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Content-->

                            <!-- Collapsible content -->
                            <div class="row" style="margin: 5px 45px 25px;">
                                <div class="col s12 l12" style="padding: 0;">
                                    <ul class="collapsible">
                                        <li>
                                            <!-- Game title -->
                                            <div class="row review-card-row">
                                                <div class="col s12 collapsible-header">
                                                    <div class="valign-wrapper">
                                                        <div class="col s8">
                                                            <div class="game-title">
                                                                <h5>{{ review.game_title }}</h5>
                                                            </div>
                                                        </div>
                                                        <div class="col s5">
                                                            <div class="game-title dropdown-indicator">
                                                                <span>Read Review</span>
                                                                <i class="material-icons">arrow_drop_down</i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Collapsible body -->
                                            <div class="collapsible-body" style="background-color: #30134d;">
                                                <!-- Summary -->
                                                <div class="row review-card-row">
                                                    <div class="col s12">
                                                        <div class="card-panel review-content">
                                                            <h6>Summary</h6>
                                                            <p>{{ review.summary }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Gameplay -->
                                                <div class="row review-card-row">
                                                    <div class="col s12">
                                                        <div class="card-panel review-content">
                                                            <h6><i class="fas fa-gamepad"></i> Gameplay</h6>
                                                            <p>{{ review.gameplay }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Visuals -->
                                                <div class="row review-card-row">
                                                    <div class="col s12">
                                                        <div class="card-panel review-content">
                                                            <h6><i class="fas fa-eye"></i> Visuals</h6>
                                                            <p>{{ review.visuals }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Sound -->
                                                <div class="row review-card-row">
                                                    <div class="col s12">
                                                        <div class="card-panel review-content last">
                                                            <h6><i class="fas fa-music"></i> Sound</h6>
                                                            <p>{{ review.sound }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Buttons -->
                            <div class="row review-card-row center-align review-card-edit-btns" style="margin-bottom: 25px;">
                                <!-- Delete -->
                                <div class="col s6 m2 l2 review-edit-left-btn">
                                    <a href="#deleteReview{{loop.index}}" class="btn modal-trigger">
                                        <i class="fas fa-trash"></i>
                                        <span>Delete</span>
                                    </a>
                                </div>
                                <!-- Edit -->
                                <div class="col s6 m2 l2">
                                    <a href="{{ url_for('profile_edit_review', review_id=review._id) }}" class="btn">
                                        <i class="fas fa-pen-square"></i>
                                        <span>Edit</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal warning -->
                <div id="deleteReview{{loop.index}}" class="modal center-align delete-review">
                    <div class="modal-content">
                    <h5><span>warning</span></h5>
                    <h4>Are You Sure You Want to Delete Your Review?</h4>
                    <p>
                        If you delete your review, you cannot undo this action.
                    </p>
                    </div>
                    <div class="modal-footer center-align">
                        <a href="{{ url_for('delete_review', review_id=review._id) }}" 
                        class="modal-close btn-flat" id="deleteReview">Yes, Delete</a>
                        <a href="#!" class="modal-close btn-flat">Cancel</a>
                    </div>
                </div>
            </div> 
        </div>
    {% endfor %}

{% endblock %}