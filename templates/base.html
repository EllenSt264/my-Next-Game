<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" type="text/css" 
    integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <!-- JQuery UI Themes -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.theme.min.css') }}" type="text/css">
    <!-- Materialize CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom_fonts.css') }}" type="text/css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css">
    <title>my Next Game</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">
</head>
<body>
    <header>
        <!-- Navbar -->
        <div class="navbar-fixed">
            <nav>
                <div class="nav-wrapper">
                    <!-- Navbar logo -->
                    <a href="{{ url_for('home') }}" class="brand-logo center">
                        <img src="{{ url_for('static', filename='img/main/odin_logo.png') }}" alt="Website/navbar brand logo" loading="lazy">
                    </a>

                    {% if session.user %}
                    <!-- Desktop profile dropdown -->
                    <a href="{{ url_for('profile_games', user=user, username=session['user'], admin=session['admin']) }}" data-target="desktop-profile" 
                    class="dropdown-trigger right hide-on-med-and-down nav-dropdown-trigger"
                    style="margin-right:25px;">
                        <i class="fas fa-user"></i>
                    </a>
                    {% endif %}

                    <!-- Mobile hamburger --> 
                    <a href="#" class="my-sidenav-trigger right hide-on-large-only"
                    style="margin-right:25px;">
                        <div id="hamburger">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </a>
                    <!-- Mobile profile -->
                    <a href="#" data-target="mobile-nav-profile" class="sidenav-trigger right" 
                    style="margin-right:20px;">
                        <i class="fas fa-user"></i>
                    </a>

                    <!-- Genre Dropdown -->
                    <ul class="dropdown-content" id="GenreDropdown">
                        <li><a href="{{ url_for('action_games') }}">Action</a></li>
                        <li><a href="{{ url_for('adventure_games') }}">Adventure</a></li>
                        <li><a href="{{ url_for('RPG_games') }}">RPG</a></li>
                        <li><a href="{{ url_for('strategy_games') }}">Strategy</a></li>
                        <li><a href="{{ url_for('multiplayer_games') }}">Multiplayer</a></li>
                    </ul>

                    <!-- Admin Dropdown -->
                    <ul class="dropdown-content" id="adminDropdown">
                        <li><a href="{{ url_for('admin_add_to_db') }}">Add to DB</a></li>
                        <li><a href="{{ url_for('admin_update_db') }}">Update DB</a></li>
                        <li><a href="{{ url_for('admin_user_requests') }}">User Requests</a></li>
                    </ul>
                
                    <ul class="left hide-on-med-and-down">
                        <li><a href="{{ url_for('home') }}">Home</a></li>
                        <li><a href="{{ url_for('favourites') }}">Our Favourites</a></li>
                        <li>
                            <a href="{{ url_for('pc_games') }}" class="dropdown-trigger nav-dropdown-trigger" 
                            data-target="GenreDropdown">Genre</a>
                        </li>
                    </ul>
                    <ul class="right hide-on-med-and-down">
                        <li><a href="{{ url_for('reviews') }}">Community Reviews</a></li>
                        {% if session.user and session.admin != False %}
                            <li><a href="#" class="dropdown-trigger nav-dropdown-trigger" data-target="adminDropdown">Admin Controls</a></li>
                        {% endif %}
                        {% if not session.user %}
                            <li><a href="{{ url_for('login') }}">Log In</a></li>
                        {% endif %}
                    </ul>

                </div>
            </nav>
        </div>
        
        <!-- Desktop profile dropdown -->
        <ul class="dropdown-content" id="desktop-profile"  data-constrainwidth="false">
            <li><a href="{{ url_for('profile_games', user=user, username=session['user'], admin=session['admin']) }}">Profile</a></li>
            <li><a href="{{ url_for('logout') }}">Log Out</a></li>
        </ul>
    

        <!-- Profile mobile side-nav -->
        <ul class="sidenav" id="mobile-nav-profile">
            <li id="closeSideNav">
                <a href="#!"><i class="fas fa-times sidenav-close right"></i></a>
            </li>
            {% if session.user %}
                <li><a href="{{ url_for('profile_games', username=session['user'], admin=session['admin']) }}">Profile</a></li>
                <li><a href="{{ url_for('logout') }}">Log Out</a></li>
            {% else %}
                <li><a href="{{ url_for('login') }}">Login</a></li>
                <li><a href="{{ url_for('register') }}">Register</a></li>
            {% endif %}
        </ul>

        <!-- Mobile side-navbar -->
        <ul class="my-sidenav" id="mobile-nav">
            <li><a href="{{ url_for('favourites') }}">Our Favourites</a></li>
            <li>
                <a href="{{ url_for('pc_games') }}">Genre</a>
                <ul>
                    <li class="mobile-sidenav-genreLink"><a href="{{ url_for('action_games') }}">Action</a></li>
                    <li class="mobile-sidenav-genreLink"><a href="{{ url_for('adventure_games') }}">Adventure</a></li>
                    <li class="mobile-sidenav-genreLink"><a href="{{ url_for('RPG_games') }}">RPG</a></li>
                    <li class="mobile-sidenav-genreLink"><a href="{{ url_for('strategy_games') }}">Strategy</a></li>
                    <li class="mobile-sidenav-genreLink"><a href="{{ url_for('multiplayer_games') }}">Multiplayer</a></li>
                </ul>
            </li>
            <li><a href="{{ url_for('reviews') }}">Community Reviews</a></li>
            {% if session.user and session.admin %}
                <li><a href="#">Admin Controls</a></li>
            {% endif %}
        </ul>

    </header>

    <!-- Flash messages -->
    <section>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="row flashes">
                        <h4 class="light-blue lighten-4 center-align">{{ message }}</h4>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </section>
    
    {% block content %}
        <!-- Hero video background -->
        <section id="heroBg" class="valign-wrapper">
            <h1 class="center-align title back-font">myNext Game</h1>
            <h1 class="center-align title front-font">myNext Game</h1>
            <div class="col s12 ">
                <video class="hero-vid" autoplay muted loop>
                    <source src="{{ url_for('static', filename='video/synthwave.mp4') }}" type="video/mp4"
                    alt="Synthwave theme parallax background video" loading="lazy">
                </video>
            </div>
        </section>

        <!-- Buttons -->
        <div class="section" id="homepageBtns">
            <div class="row container">
                <div class="col s12 m6 center-align">
                    <a href="{{ url_for('favourites') }}" class="waves-effect waves-light btn-large">
                        Explore Our Favourites
                    </a>
                </div>
                <div class="col s12 m6 center-align">
                    <a href="#" class="waves-effect waves-light btn-large">
                        Take the Quiz
                    </a>
                </div>
            </div>
        </div>

        <!-- Parallax image -->
        <div class="parallax-container" id="homeParallax-img1">
            <div class="parallax">
                <img src="{{ url_for('static', filename='img/main/parallax-bg_img2.jpg') }}" alt="Synthwave theme parallax background image" loading="lazy">
            </div>
        </div>

        <!-- About Us -->
        <div class="section" id="aboutUs">
            <div class="row container white-text">
                <div class="col s12 m6 offset-m3 center-align">
                    <h3>About Us</h3>
                </div>
                <div class="col s12 m6 offset-m3">
                    <div class="divider"></div>
                </div>
            </div>
            <div class="row container white-text">
                <div class="col s12 m6 offset-m3 center-align">
                    <p>
                        We are committed to provide you with a gaming, community-based platform that is free, honest and unique. At <span>my
                            Next Game</span> we value people and honesty, meaning all of our reviews are free from commercial bias;
                        written by people for people. Register an account with us and join the community so that you too can review and like
                        games, build your own 'gaming playlist' and connect to other users in the community.
                    </p>
                </div>
            </div>
        </div>

        <div class="parallax-container" id="homeParallax-img2">
            <div class="parallax">
                <img src="{{ url_for('static', filename='img/main/parallax-bg_img1.png') }}" alt="Synthwave theme parallax background image" loading="lazy">
            </div>
        </div>

        <!-- Games List -->
        <div class="section list-of-games">
            <div class="row py-5">
                <!-- Best Sellers -->
                <div class="col s12 m12 l4 offset-l1">
                    <!-- Heading -->
                    <h3 class="center-align white-text">Best Sellers</h3>
                    <!-- Games -->
                    {% for bestseller in bestsellers %}
                        <div class="card horizontal purple-linear-gradient glow">
                            <div class="card-image">
                                <img src="{{ bestseller.game_img_full }}" 
                                alt="Game image for {{ bestseller.game_title }}" class="responsive-img">
                            </div>
                            <div class="card-stacked">
                                <div class="card-content white-text">
                                    <div class="card-title">
                                        <span>
                                            {{ bestseller.game_title }}
                                        </span>
                                    </div>
                                    <p>
                                        {{ bestseller.game_top_tags[:4]|join(', ') }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    <ul class="pagination center-align">
                        {{ pagination.links }}
                    </ul>
                </div>

                <!-- Award Winners -->
                <div class="col s12 m12 l4 offset-l2">
                    <!-- Heading -->
                    <h3 class="center-align white-text">Award Winners</h3>
                    <!-- Games -->
                    {% for awardwinner in awardwinners %}
                        <div class="card horizontal purple-linear-gradient glow">
                            <div class="card-image">
                                <img src="{{ awardwinner.game_img_full }}" alt="Image for {{ awardwinner.game_title }}" class="responsive-img">
                            </div>
                            <div class="card-stacked">
                                <div class="card-content white-text">
                                    <div class="card-title">
                                        <span>
                                            {{ awardwinner.game_title }}
                                        </span>
                                    </div>
                                    <p>
                                        {{ awardwinner.award_year }}
                                        {{ awardwinner.award_title }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    {% endblock %}
    
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Data JS file -->
    <script src="{{ url_for('static', filename='js/data.js') }}"></script>
    <!-- JQuery UI -->
    <script src="{{ url_for('static', filename='js/jquery-ui.min.js') }}"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>