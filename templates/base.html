<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" type="text/css" 
    integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <!-- Materialize CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom_fonts.css') }}" type="text/css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css">
    <title>my Next Game</title>
</head>
<body>
    <header>
        <!-- Navbar -->
        <div class="navbar-fixed">
            <nav>
                <div class="nav-wrapper">
                    <!-- Navbar logo -->
                    <a href="{{ url_for('home') }}" class="brand-logo center">
                        <img src="{{ url_for('static', filename='img/odin_logo.png') }}" alt="Website/navbar brand logo">
                    </a>

                    {% if session.user %}
                    <!-- Desktop profile dropdown -->
                    <a href="{{ url_for('profile_games', username=session['user']) }}" data-target="desktop-profile" 
                    class="dropdown-trigger right hide-on-med-and-down nav-dropdown-trigger"
                    style="margin-right:25px;">
                        <i class="fas fa-user"></i>
                    </a>
                    {% endif %}

                    <!-- Mobile hamburger --> 
                    <a href="#" class="my-sidenav-trigger right hide-on-large-only"
                    style="margin-right:25px;">
                        <div id="hamburger">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </a>
                    <!-- Mobile profile -->
                    <a href="#" data-target="mobile-nav-profile" class="sidenav-trigger right" 
                    style="margin-right:20px;">
                        <i class="fas fa-user" style="font-size: 2.5rem"></i>
                    </a>

                    <!-- Genre Dropdown -->
                    <ul class="dropdown-content" id="GenreDropdown">
                        <li><a href="{{ url_for('action_games') }}">Action</a></li>
                        <li><a href="{{ url_for('adventure_games') }}">Adventure</a></li>
                        <li><a href="{{ url_for('RPG_games') }}">RPG</a></li>
                        <li><a href="{{ url_for('strategy_games') }}">Strategy</a></li>
                        <li><a href="{{ url_for('multiplayer_games') }}">Multiplayer</a></li>
                    </ul>
                
                    <ul class="left hide-on-med-and-down">
                        <li><a href="{{ url_for('home') }}">Home</a></li>
                        <li><a href="{{ url_for('pc_games') }}">Platform</a></li>
                        <li>
                            <a href="{{ url_for('pc_games') }}" class="dropdown-trigger nav-dropdown-trigger" 
                            data-target="GenreDropdown">Genre</a>
                        </li>
                    </ul>
                    <ul class="right hide-on-med-and-down">
                        <li><a href="{{ url_for('reviews') }}">Community Reviews</a></li>
                        {% if not session.user %}
                            <li><a href="{{ url_for('login') }}">Log In</a></li>
                        {% endif %}
                    </ul>

                </div>
            </nav>
        </div>
        
        <!-- Desktop profile dropdown -->
        <ul class="dropdown-content" id="desktop-profile"  data-constrainwidth="false">
            <li><a href="{{ url_for('profile_games', username=session['user']) }}">Profile</a></li>
            <li><a href="{{ url_for('logout') }}">Log Out</a></li>
        </ul>
    

        <!-- Profile mobile side-nav -->
        <ul class="sidenav" id="mobile-nav-profile">
            <li id="closeSideNav">
                <a href="#!"><i class="fas fa-times sidenav-close right"></i></a>
            </li>
            {% if session.user %}
                <li><a href="{{ url_for('profile_games', username=session['user']) }}">Profile</a></li>
                <li><a href="{{ url_for('logout') }}">Log Out</a></li>
            {% else %}
                <li><a href="{{ url_for('login') }}">Login</a></li>
                <li><a href="{{ url_for('register') }}">Register</a></li>
            {% endif %}
        </ul>

        <!-- Mobile side-navbar -->
        <ul class="my-sidenav" id="mobile-nav">
            <li><a href="{{ url_for('games') }}">Platform</a></li>
            <li><a href="{{ url_for('games') }}">Genre</a></li>
            <li><a href="{{ url_for('reviews') }}">Community Reviews</a></li>
        </ul>

    </header>

    <!-- Flash messages -->
    <section>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="row flashes">
                        <h4 class="light-blue lighten-4 center-align">{{ message }}</h4>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </section>
    
    {% block content %}
        <!-- Hero video background -->
        <section id="heroBg" class="valign-wrapper">
            <h1 class="center-align title back-font">myNext Game</h1>
            <h1 class="center-align title front-font">myNext Game</h1>
            <div class="col s12 ">
                <video class="hero-vid" autoplay muted loop>
                    <source src="{{ url_for('static', filename='video/synthwave.mp4') }}" type="video/mp4">
                </video>
            </div>
        </section>

        <!-- Buttons -->
        <div class="section">
            <div class="row container">
                <div class="col s12 m6 center-align">
                    <a href="#" class="waves-effect waves-light btn-large">
                        Explore Our Favourites
                    </a>
                </div>
                <div class="col s12 m6 center-align">
                    <a href="#" class="waves-effect waves-light btn-large">
                        Take the Quiz
                    </a>
                </div>
            </div>
        </div>

        <!-- Parallax image -->
        <div class="parallax-container" style="height:50vh;">
            <div class="parallax">
            <!--
                The image was not showing,
                To fix this I used code from this source:
                "https://stackoverflow.com/questions/43896410/parallax-from-materialize-no-showing-image/43963949"
            -->
                <img src="https://i.redd.it/p1ed58yua3h51.png"
                style="transform: translate3d(-50%, 432.451px, 0px);opacity: 1;">
            </div>
        </div>

        <!-- Games List -->
        <div class="section list-of-games" style="padding-top: 50px;">
            <div class="row py-5">
                <!-- Best Sellers -->
                <div class="col s12 m6 l4 offset-l1">
                    <!-- Heading -->
                    <h3 class="center-align white-text">Best Sellers</h3>
                    <!-- Games -->
                    {% for bestseller in bestsellers %}
                        <div class="card horizontal purple-linear-gradient glow grow">
                            <div class="card-image">
                                <img src="{{ bestseller.game_img_sm }}" 
                                alt="" class="responsive-img">
                            </div>
                            <div class="card-stacked">
                                <div class="card-content">
                                    <div class="card-title">
                                        <span>
                                            {{ bestseller.game_title }}
                                        </span>
                                    </div>
                                    <p>
                                        {{ bestseller.game_top_tags|join('') }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    <ul class="pagination center-align">
                        {{ pagination.links }}
                    </ul>
                </div>

                <!-- Award Winners -->
                <div class="col s12 m6 l4 offset-l2">
                    <!-- Heading -->
                    <h3 class="center-align white-text">Award Winners</h3>
                    <!-- Games -->
                    {% for awardwinner in awardwinners %}
                        <div class="card horizontal purple-linear-gradient glow grow">
                            <div class="card-image">
                                <img src="{{ awardwinner.winner_img }}" alt="" class="responsive-img">
                            </div>
                            <div class="card-stacked">
                                <div class="card-content">
                                    <div class="card-title">
                                        <span>
                                            {{ awardwinner.winner }}
                                        </span>
                                    </div>
                                    <p>
                                        {{ awardwinner.award_title }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    {% endblock %}
    
    <!-- JQuery UI Themes -->
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Data JS file -->
    <script src="{{ url_for('static', filename='js/data.js') }}"></script>
    <!-- JQuery UI -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
</body>
</html>